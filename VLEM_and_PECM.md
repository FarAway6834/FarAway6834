# VLEM과 PECM을 통한 효율적인 음성의 표기, 그리고 음성합성

내게 있어서 음성합성은 기술이 아니다. 예술가들의 손에 쥐여줄 기표를 조립하는것이다. 내가 감히 넘볼수 없는 예술의 경지를, 기술을 통해 묵묵히 띄워주고싶다.
그래서 음성합성 이론을 만들었다.

VLEM은 음성 발음의 구조를, PECM은 edit g에 대해, (◦ g)로 발음 타이밍 합성과, Putter를 이용한 셈플의 컷 등을 진행한다. 즉, 발음 기호를 오디오 함수의 기호로 보는거다.

## VLEM(Voice Lang Extension Model)와 Vocaloid as pop

국제 음성 기호(International Phonetic Alphabet)의 한계로는 화자 간 변이(Inter-speaker variation)를 담지 못한다는점과, 전이음(Transitional sound)을 담지 못한다는 점, 그리고 스팩트로그램으로 관측했을때, 세부적인 조음 시점과 타이밍을 완벽하게 담지 못한다는 점이 지적된다.
 화자 간 변이(Inter-speaker variation)란 화자간의 세세한 음성 차이를 말한다. 예컨데, 필자는 한국어 화자인데도, "아"를 한국어의 중설 근저모음 /ɐ/이 아닌 일본어의 "あ"발음인 중설 평순 저모음 /ä/로 발음한다. 하지만 딱히 필자 본인은 일본인 유전자가 있는것도 아니고, 일본 문화권에 가까운 친일 집안도 아니며, 일본어를 잘해야하는 환경이 있는것도 아니다. 오히려, 5년동안 일본어를 배우려 했는데 못배울정도로 못한다. 딱히 일본어의 영향을 받은게 아니라는거다. 그렇다면 우리는 왜 IPA를 사용하여 발음을 표기하는걸까? 그 이유는 IPA의 목적은, 모국어 화자의 발음을 완벽히 구현하는게 아닌, 해당 언어의 표준화된 음성을 규격화하여, 최소한의 연구와 의사소통을 하는것이 목적이기 때문이다. 때문에 당신이 일본인이고, 한국어를 배우려 한다면, 딱히 중설 근저모음을 연습할 필요 없이 "あ"정도로만 발음해도 좋다. 그 정도도 화자 간 변이(Inter-speaker variation) 즉, 개인차 정도로 볼수 있기 때문이다.
 전이음(Transitional sound)이란, 음소와 음소 사이로 이어지는 음을 말한다. 그러나 국제 음성기호에서는 전이음이 빠져있다. 이를 보완하기 위해 VLEM(Voice Lang Extension Model)이라는 형식 언어가 고안되었다. VLEM(Voice Lang Extension Model)이란 음성기호 (Voice Lang) L에 해당하는 기호로 만든 발음 x, y, z를 통해/x/, /xy/, /xyz/의 음을 매끄럽게 표현하는 방법이 존재한다. 필자가 정의한 VLEM(Voice Lang Extension Model)이라는 형식 언어를 통해 표기하자면, IPA음성 /xy/, /xyz/, /x/에 대하여, /x/의 음성은 x <0>, x <1>, x <2>로 나뉜다. /x/ = x <0> x <1> x <2>로 정의된다. 이때, x <0>는 음성이 시작될때, 시작시 음소의 머리에 나오는 음이며, x <1>는 /x/를 어떻게 발음하던간에 항상 포함되는 영역으로써, x의 핵이다. /xy/나 /xyz/와 같이 다른 발음으로 이어지는 경우에, 실제로는 인간의 발음이 변형될것인데도, 변경되지 않는 핵인거다. 브라-켓처럼 부분발음 표기도 존재한다. 예컨데, x<0> x <1> = /x|이며, x <1> x <2> = |x/이다. 또한 x <1> (x <3> y) y <1> = |xy|이다. 그런데 보지 못했던 기호가 있다. <3>가 무엇일까? (x <3> y)는 전이음을 의미한다. 실제 인간의 조음에서는 x에서 y로 발음이 바뀔때의 전이음이 존재한다. 그렇기에 실제 인간의 발음은 /xy/ = x <0> x <1> (x <3> y) y <1> <2>이고, /xyz/ = x <0> x <1> (x <3> y) y <1> (y <3> z) z<1> z<2>일수밖에 없다. 그에 비해서, 음성합성엔진인 VOCALOID나 UTAU로 만든 음성은 /x||y||z/나 /x||y/같은 식으로 발음하거나, 이음세인 (x <3> y)가 인간과 달리, 조교자가 직접 창조해낸 방식으로, 편집을 통해 만들어진 이음세이다.
 보컬로이드 장르는 이같은 /x||y||z/같은 끊어진 발음의 매력이 있는 새계이다. 일부 인간들은 기계음을 싫어하는데, 그런 막연한 기계에 대한 반감을 없에기 위해, 보컬로이드는 POP이 되어야 한다고 생각한다. 미쿠와 테토는 영원한 나의 아이돌이 되어야 한다. 필자는 우주가 죽을때까지 미쿠과 태토가 덕질받는 새상을 보존하고싶었다. 그랬기에, 끊어지는 음 외에도 자연스럽게 이어지는 음을 보컬로이드에서 만들면 좋겠다 생각했다. 그러한 방법을 통해서 대중들이 보컬로이드를 사랑하게 하고, 결과적으로는 끊어진 기계음이, 실험적인 음성이 아닌 모두에게 사랑받는 엄연한 음악기법으로 영원히 자리잡았으면 하고 있다. 영원히 내 곁을 배신(去る（死）)하지 않았으면 한다. VLEM(Voice Lang Extension Model)는 필자가 보컬로이드를 덕질하기 위해 만든 형식언어다. 필자는 조교할수 있는 모든 소리, 사람의 음성과 반려동물들의 사랑스러운 음성, 피아노소리, 무생물의 소리 등등이 전부 악기라고 생각한다. 전산으로 다룰수 있고 아름답게 하기 위한 손길을 뻗을수 있는 모든 파동함수 기표가 전부 조교 가능안 악기로써, 우리 곁을 지켰으면 좋겠다. 그렇기에 누구나 보컬로이드가 될수 있고, 보컬로이드가 팝의 기법으로 영원히 보존되는 새상을 원한다. 이름하여 Vocaloid as pop. 모두가 전이음 없는 아름다움을 느껴보았으면 좋겠다. 영원히.
 마치며, 엡실론 고차함수와 VLEM Equation용 차 연산자를 첨부한다. VLEM의 음성기호는 적절한 음성이라는 기표에 연결될 필요가 없으며, 부적절한 음성이어도 된다. 그렇기에, 발음은 본인이 알아서 녹음해서 배정해야한다. 그렇기에, 어떤 발음이 알맞고, <0>, <1>, <2>, <3>연산자가 어떤지는 방정식을 통해서 구할 필요가 있다.
 모든 발음에 있어서, 녹음 이후에 후처리를 가해서 ε <n>이 재생될때 x <n>이 재생되도록 한다. 속도는 상관없다. 어짜피 음성기호로는 속도는 무리다. 세부적인 조음 시점과 타이밍을 완벽하게 담지 못한다는 점은 인정한다. 다만, 내가 Vocaloid as pop을 꿈꾸면서, 덕질을 바라는데, 이게 전부이면 김빠지지 않는가? 셈플링인 PECM으로 VLEM이라는 모델을 구현하는게 사실은 펙트다.

/* 셈플링인 PECM과 접점이 존재하는 엡실론 고차함수, 엡실론의 cor가 셈플링에 쓰이기 때문. */

ε = //

 * (ε <0>)(/x/) = ε<0>(/x/) = x <0>
 * (ε <1>)(/x/) = ε<1>(/x/) = x <1>
 * (ε <2>)(/x/) = ε<2>(/x/) = x <2>
 * (ε <0>)(/xy/) = ε<0>(/xy/) = x<0>
 * (ε <1>)(/xy/) = ε<1>(/xy/) = x<1>
 * (ε <2>)(/xy/) = ε<2>(/xy/) = x <3> y

/* VLEM Equation용 차 연산자 */

x - y = (x = y)?0:1;
ker /a|x|b/ - /ab/ = {x <3> y};

## PECM (Put-Edit-Cor Model, ぺくむ), VLEM모델 구성을 위한 음성 짜집기 모델론적 언어

기초 용어)
 * first(x, y) = x # first element of pair
 * last(x, y) = y # last element of pair
 * (..., x, y, z) = (..., x, (y, z)) # requrisive definition of tuple
 * Func(X, Y) = {f | f : X ↦ Y} # Function Set, Function Space
 * P(X) = {S | X ⊆ X} # Power Set
 * homeomorphism f : C⁰f, ∃f⁻¹
 * f ◦ g # Composite Function
    - definition)
    - 1. dom f ◦ g = dom g
    - 2. codom f ◦ g = codom f
    - 3. (f ◦ g)(x) = f(g(x))
 * ℝ = (-∞, ∞) # real number
 * f = (dom f, codom f, graph f) #function
    - definition)
    - 1. dom f = first(f)
    - 2. codom f = first(last(f)
    - 3. graph f = first(last²(f))
    - 4. graph f ⊆ dom f × codom f
    - 5. f[X] = {y | y = f(x), x ∈ X}
    - 6. ∀x ∈ dom f, ∃!y ∈ f[dom f], (x, y) ∈ graph f
    - 7. first[graph f] = dom f
 * X × Y : 곱집합. 굳이 설명이 필요없다 느낌.

PECM (Put-Edit-Cor Model, ぺくむ)

1. Layer 0
 * P(ℝ) ∪ Func[P(ℝ)²]
 * Constants
 * Functions • Operators
    + Cor f
        - definition)
        - 1. Cor f ⊆ dom f
        - 2. ∀x ∈ dom f ∖ Cor f, f(x) = 0, f(min Cor f) ≠ 0 ≠ f(max Cor f)
 * Predicates • Sets
    + reg S : S = [min S, max S]
    + regf f : reg dom f, reg codom f
    + homeomorphism f : C⁰f, ∃f⁻¹

2. Layer 1
 * Domain : {f | regf(f)}
 * Constants
 * Functions • Operators
    + f ◦ g
        - definition)
        - 1. dom f ◦ g = dom g
        - 2. codom f ◦ g = codom f
        - 3. (f ◦ g)(x) = f(g(x))
    + Putter(f)(x)
        - definition)
        - 1. ∃!Putter(f)⁻¹
        - 2. Putter(f) = (max cor f - min cor f)x + min cor f
        - Fact : f(x) = ax + b ↔ f⁻¹(x) = x/a - b/a
        - Fact : Putter(f)⁻¹(x) = (x/(max cor f - min cor f)) - ((min cor f)/(max cor f - min cor f))
 * Predicates • Sets
    + edit(f) : homeomorphism f, (f : [0, 1] -> [0, 1])

 참고로 이를 이해하려면, cor f가 f(x)가 무음이 아니기 시작한 첫 부분부터, 무음으로 다시 전환된 순간까지, 핵심부분만 간추렸을때의 영역이란걸 감안해야한다. cor f가 같고 graph f상 정의역의 축소 관계라면, 함수식 가장 큰놈꺼가 모든놈꺼다.
 이와 같이 형식적으로 정의된 모델에서, 음파 파동 함수는 추후 설명할 바와 같이 셈플링된다.
그전에 먼저, 나무위키에 따른 스피커의 원리를 알아보자. 스피커는 전기신호를 소리로 재생하는 장비다. 물론 전기신호가 작기 때문에 엠프가 필요하다. 전압 V가 가해지면, 영구자석과 코일 사이에서 전자기력이 작용해서 영구자석 근처의 코일이 왕복운동을 하여 거기에 붙은 진동판이 소리를 내는 구조다.
 마이크는 단순히, 다시 소리를 진동판으로 받아서, 전압 신호로 바꾸는거다. 이 과정에서 PCM인지 뭔지 하는것들이 여러가지 일어나는데 알 필요 없고, 중요한건, 음파 파동 함수의 정보가, 시간-전압 그래프를 그리는 함수로 변했다는거다. PECM (Put-Edit-Cor Model, ぺくむ)은 해당 함수를 조작한다.
 먼저, 시작하는 시간과 끝나는 시간의 경우 min dom f가 시작시간, max dom f가 끝나는 시간이 된다. 그리고, 실제로 함수가 정의되었다 말하기 좋은곳은 cor f이다. 사실 cor f외에는 그냥 무음이기에, 이 함수는 cor f로 정의역을 축소했을때 f를 dom f에서 컴팩트 지지 (= 미적분에서 나오는 용어인데, 따로 정의되지 않으면 기본값이 0으로 나오기에 항상 정의되는 함수를 이르는 말)이게 만든 셈이다.
 중요한 점이 하나 있다면, 시간축으로의 평행이동은 오디오를 전혀 변화시키지 않는다. 오디오를 먼저 하게 되거나, 나중에 하게 되거나다. 그러나, 앞으로는 오디오 대신 y축 수치를 재생한다고 말하겠다. 시간에 따라 점 P가 움직이는 궤적으로 생각하는게 이 이야기에선 옳기 때문이다. regf f를 만족하는 V = f(t)를 이제부터, 정규pecm함수(regf)라 부를거다. 그렇다. 공학적 응용 방안은 아까전에 다 설명했으니, 이제 이론을 말할 차례다. Layer 1로 가보자.
 에딧(edit)이란, 단위구간(Unit interval) [0, 1]를 정의역이자 공역으로 가지는 정규pecm함수이다 위상동형사상이다. (참고로 필자는 대수학적 위상수핫은 잘 모르나 단위구간이 즐겨쓰인다는걸 알기에 이름을 가져왔다.) edit의 경우 정규pecm함수라는, pecm도메인의 원소이기도 하지만 연산에 있어 매우 특별한 피연산자다. 예를들어서, 단위구간이 정의역인 정규pecm함수 f와, 위상동형사상 역할로써의 edit g는 f ◦ g에서, 단순히 y = x형태로 증가하던 f의 입력 t를 g라는 증가•감소함수로 바꾼다. 이를 통해서 (x, u = g(x), y = f(u))인 배정을 통해서, f의 재생속도가 g'(x)배속으로 x에 따라서 바뀐다.
 Putter(f)연산의 경우, 이번에도 역시 f에 적용시켜둘 특별한 피연산자를 반환한다. 그러나 Putter(f)는 입력의 graph (= 입력 구간) 선형적으로 축소 • 확대시키는 역할일 뿐이지, 배속이 변하는 함수는 아니다. 예를들어서, Putter(f) : [0, 1] ↦ cor f이다. 그렇다. Putter는 함수 f를 editible한 함수로 만들어주기 위한 연산이다. f ◦ Putter(f) : [0, 1] ↦ codom f는 (f ◦ Putter(f))(0) ≠ 0 ≠ (f ◦ Putter(f))(1)이고, graph f와 graph f ◦ Putter(f)는 가로로 (max cor f - min cor f)배 축소(줄임) • 확대(늘림)한 모양이다. (◦ Putter(f))함자는 어떤 함수를 cor f구간만큼 셈플링한다. 그리고, (◦ Putter(f)⁻¹)는 역셈플링한다. 서로 역함수 관계다. 그러나, `◦`가 가환이 아니라 그리 신경쓸필요는 없다. cor g ≠ cor f여도 상관없다. 에초에 f랑 g는 미분 불가능하거나 불연속인것도 개무시하고 쓰는 평범한 함수다. (◦ Putter(f))(g)를 통해 셈플링이 가능하다는거다. 그냥 [a, b]만큼을 f에서 셈플링하고싶다면, 아무런 임의의 cor g = [a, b]에 대해, 함자 (◦ Putter(g))를 가해주는, 즉, (◦ Putter(g))(f)를 해주면 그만이다.
 VLEM에서의 응용 : 묵음기호 h와 음성기호 x와 비프음 b에 대해, /h/ = h <0> h <1> h <2>, /x/ = x <0> x <1> x <2>, /b/ = b <0> b <1> b <2>에서, h(t) = 0, b(t) = 1다. 이때,

 * ε <0> = b <0> h <1> h <2>
 * ε <1> = h <0> b <1> h <2>
 * ε <2> = h <0> h <1> b <2>
 * ε <3> = h <0> h <1> (b <3> b) h <1> h<2>

이므로, 해당 배정을 통해, VLEM모델을 구성할수 있으며, 이를 PECM-contruction이라 한다. 물론 모델론상, 굳이 PCEM일 필요는 없다. 구축됫 만족하면 그만이니까. 아무튼간에, VLEM랑 PCEM을 동시에 사용하면, 국제 음성 기호(International Phonetic Alphabet)의 한계인 화자 간 변이(Inter-speaker variation)를 담지 못한다는점과, 전이음(Transitional sound)을 담지 못한다는 점, 그리고 스팩트로그램으로 관측했을때, 세부적인 조음 시점과 타이밍을 완벽하게 담지 못한다는 점이 커버된다. 왜냐하면, VLEM에서 화자 간 변이(Inter-speaker variation)를 극복하는 방법은, 직접 말하는거고, 전이음(Transitional sound)같은 경우, /x|랑 (x <3> y)가 메끄럽게 이어지고, (x <3> y) |y/가 매끄럽게 이어진다. 그게 가능한 이유는, (x <3> y)을 녹음하기 위해서 /xy/를 일일히 다 녹음하기 때문이다.
 보컬로이드의 부흥, 귀여운 미쿠와 태토의 영생을 위해서는 /xy/를 일일히 다 녹음할 자신이 있다. 미쿠가 「지금 바로 윤회」에서 몇번이고 사랑에 빠졌다는 가사를 생각하면, Vocaloid as pop으로 영원히 그를 살려서 모두에게 공개하고 싶을 지경이다. 아아. 이제는 재생 속도마져 PCEM으로 조정핤 있어. 그러니까 제발 팝 시장에서 부흥해줘, 나를 위해 영원히 빛나는 샛별의 환생 보컬로이드....
